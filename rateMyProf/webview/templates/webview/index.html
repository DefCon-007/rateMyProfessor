{% load static %}

<!DOCTYPE html>
<html lang="en"><!-- Basic -->
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-84925216-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-84925216-4');
</script>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">   
   
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
 
     <!-- Site Metas -->
    <title>Rate My Professor</title>
    <meta name="keywords" content="">
    <meta name="description" content="A webapp to rate the professors">
    <meta name="author" content="Ayush Goyal">


    <link rel="apple-touch-icon" sizes="57x57" href="{% static '/webview/favicon/apple-icon-57x57.png' %}">
    <link rel="apple-touch-icon" sizes="60x60" href="{% static '/webview/favicon/apple-icon-60x60.png' %}">
    <link rel="apple-touch-icon" sizes="72x72" href="{% static '/webview/favicon/apple-icon-72x72.png' %}">
    <link rel="apple-touch-icon" sizes="76x76" href="{% static '/webview/favicon/apple-icon-76x76.png' %}">
    <link rel="apple-touch-icon" sizes="114x114" href="{% static '/webview/favicon/apple-icon-114x114.png' %}">
    <link rel="apple-touch-icon" sizes="120x120" href="{% static '/webview/favicon/apple-icon-120x120.png' %}">
    <link rel="apple-touch-icon" sizes="144x144" href="{% static '/webview/favicon/apple-icon-144x144.png' %}">
    <link rel="apple-touch-icon" sizes="152x152" href="{% static '/webview/favicon/apple-icon-152x152.png' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static '/webview/favicon/apple-icon-180x180.png' %}">
    <link rel="icon" type="image/png" sizes="192x192"  href="{% static '/webview/favicon/android-icon-192x192.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static '/webview/favicon/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="96x96" href="{% static '/webview/favicon/favicon-96x96.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static '/webview/favicon/favicon-16x16.png' %}">
    <link rel="manifest" href="{% static '/webview/favicon/manifest.json' %}">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="{% static '/webview/favicon/ms-icon-144x144.png' %}">
    <meta name="theme-color" content="#ffffff">


{#    Rating Styles Start#}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css'>
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Raleway:100'>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


{#    Rating styles End#}


    <!-- Site Icons -->

    <link rel="shortcut icon" href="{% static '/webview/favicon/favicon.ico' %}" type="image/x-icon">

    <!-- Bootstrap CSS -->
{#    <link rel="stylesheet" href="{% static '/webview/css/bootstrap.min.css' %}">#}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.0/css/bootstrap.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.0/js/bootstrap.min.js"></script>
	<!-- Site CSS -->
    <link rel="stylesheet" href="{% static '/webview/css/style.css' %}">
	<!-- Fontawesome CSS -->
    <link rel="stylesheet" href="{% static '/webview/css/all.min.css' %}">
    <!-- Responsive CSS -->
    <link rel="stylesheet" href="{% static '/webview/css/responsive.css' %}">
    <link rel="stylesheet" href="{% static '/webview/css/loading.css' %}">
    <!-- Custom CSS -->
{#    <link rel="stylesheet" href="{% static '/webview/css/custom.css' %}">#}

{#    SweetAlert2#}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@yaireo/tagify@2.9.1/dist/tagify.css">
    <script src="https://cdn.jsdelivr.net/npm/@yaireo/tagify@2.9.1/dist/tagify.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.33.1/dist/sweetalert2.all.min.js"></script>


    <!-- Place this tag in your head or just before your close body tag. -->
<script async defer src="https://buttons.github.io/buttons.js"></script>
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
          /* NOTE: The styles were added inline because Prefixfree needs access to your styles and they must be inlined if they are on local disk! */
          .star-rating, .label-tag{
      font-family: 'FontAwesome';
              color: black;
        font-size: 120%;
      {#margin: 50px auto;#}
    }
    .star-rating > fieldset {
      border: none;
      display: inline-block;
    }
    .star-rating > fieldset:not(:checked) > input {
      position: absolute;
      top: -9999px;
      clip: rect(0, 0, 0, 0);
    }
    .star-rating > fieldset:not(:checked) > label {
      float: right;
      width: 1em;
      padding: 0 0.05em;
      overflow: hidden;
      white-space: nowrap;
      cursor: pointer;
      font-size: 200%;
      color: #9c7ad3;
    }
    .star-rating > fieldset:not(:checked) > label:before {
      content: '\f006  ';
    }
    .star-rating > fieldset:not(:checked) > label:hover,
    .star-rating > fieldset:not(:checked) > label:hover ~ label {
      color: #5b487a;
      text-shadow: 0 0 3px #987bc6;
    }
    .star-rating > fieldset:not(:checked) > label:hover:before,
    .star-rating > fieldset:not(:checked) > label:hover ~ label:before {
      content: '\f005  ';
    }
    .star-rating > fieldset > input:checked ~ label:before {
      content: '\f005  ';
    }
    .star-rating > fieldset > label:active {
      position: relative;
      top: 2px;
    }
    body {
      background: #262829;
      color: #95a5a6;
      font-family: 'Raleway';
      text-align: center;
    }
    body p {
      font-size: 1.6em;
      margin: auto;
      width: 80%;
    }
    body a {
      color: #9c7ad3;
    }




        .logout {
 {#background:url('https://dh3vbjnk0bnfa.cloudfront.net/static/centralauth/images/btn-login-hover.png') no-repeat 5px 5px #484B4F;#}
             background: #755c9e;
  width: 100px;
  cursor:pointer;
  border-radius:50px;
  padding:10px 20px 10px 0;
  color:White;
  font-size:14px;
  text-align:left;
  text-indent:40px;
  display:block;
  margin:0 auto;

  /* Animations: */
  -webkit-transition-timing-function: ease-in-out;
  -webkit-transition-duration: .4s;
  -webkit-transition-property: all;

  -moz-transition-timing-function: ease-in-out;
  -moz-transition-duration: .4s;
  -moz-transition-property: all;
}

.logout:hover {
  {#background-image: url( 'https://dh3vbjnk0bnfa.cloudfront.net/static/centralauth/images/btn-login.png' );#}
    background: #755c9e;
  {#background-position: 65px 5px;#}
  text-indent: 15px;
}

        .containerdiv {
 border: 0;
  position: relative;
            {#margin-right: 50%;#}
  {#width: 300px;#}
  width: 167.96px;
            {#margin-bottom: 2%;#}
            text-align: center
}
.cornerimage {
  {#border: 0;#}
    display: inline-block;
  position: absolute;
  {#top: 0;#}
  {#  left: 0;#}
  overflow: hidden;
 }
 .imgStar{

   max-width: 167.96px;


 }

        {#Preloader#}
        .preloader-area {
    position: fixed;
    background: #fff;
    z-index: 11000;
    height: 100%;
    width: 100%;
    overflow: hidden;
}

.spinner {
    margin: auto;
    z-index: 99999;
    width: 40px;
    height: 40px;
    position: relative;
    text-align: center;
    position: absolute;
    left: 50%;
    right: 50%;
    margin-left: -20px;
    top: 50%;
    -webkit-animation: sk-rotate 2.0s infinite linear;
    animation: sk-rotate 2.0s infinite linear;
}

.dot1,
.dot2{
    width: 60%;
    height: 60%;
    display: inline-block;
    position: absolute;
    top: 0;
    background-color: black;
    border-radius: 100%;
    -webkit-animation: sk-bounce 1.0s infinite ease-in-out;
    animation: sk-bounce 3.0s infinite ease-in-out;
}

.dot1 {
    background-color: #755c9e;
}

.dot2 {
    top: auto;
    background-color: #333841;
    bottom: 0;
    -webkit-animation-delay: -2.0s;
    animation-delay: -1.0s;
}


@-webkit-keyframes sk-rotate {
    100% {
        -webkit-transform: rotate(180deg)
    }
}

@keyframes sk-rotate {
    100% {
        transform: rotate(360deg);
        -webkit-transform: rotate(360deg)
    }
}

@-webkit-keyframes sk-bounce {
    0%,
    50% {
        -webkit-transform: scale(0.0)
    }
    100% {
        -webkit-transform: scale(1.0)
    }
}

@keyframes sk-bounce {
    0%,
    100% {
        transform: scale(0.0);
        -webkit-transform: scale(0.0);
    }
    50% {
        transform: scale(1.0);
        -webkit-transform: scale(1.0);
    }
}

        </style>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@yaireo/tagify@2.9.1/dist/tagify.min.js"></script>
    <script>
       document.onreadystatechange = function () {
  var state = document.readyState
  if (state == 'interactive') {
       {#document.getElementById('contents').style.visibility="hidden";#}
  } else if (state == 'complete') {
      setTimeout(function(){
         {#document.getElementById('interactive');#}
         document.getElementById('loader').style.visibility="hidden";
         {#document.getElementById('contents').style.visibility="visible";#}
      },1000);
  }
}
    </script>
</head>

<body>
<div class="preloader-area" id="loader">
        <div class="spinner">
            <div class="dot1"></div>
            <div class="dot2"></div>
        </div>
    </div>
<script>


function capitalizeFirstLetter(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
}
    var LOGIN_STATUS = {{ loggedIn }};


{% if swalFlag %}
    Swal({
                                title : capitalizeFirstLetter("{{ swalStatus }}"),
                                text :"{{ msg }}",
                                type : "{{ swalStatus }}",
                            });
{% endif %}
    </script>
<div id="particles-js" class="main-form-box">

<input type="button" value="Logout" class="logout"  onclick="window.location='/accounts/logout'" id="logoutButton" style="z-index: 1000;position: fixed;top:2%;right: 4%;"/>

	<div class="md-form">

		<div class="container">

			<div class="row">

				<div class="col-md-6 offset-md-3">

					<div class="panel panel-login">
						<div class="logo-top" style="background-color: white">
							<a href="#"><img src="{% static 'webview/images/logo.png' %}" alt="" /></a>
						</div>
						<div class="panel-heading">
							<div class="row">
								<div class="col-lg-6 col-sm-6 col-xl-6">
									<a href="#" class="active" id="login-form-link">See Ratings</a>
								</div>
								<div class="col-lg-6 col-sm-6 col-xl-6">
									<a href="#" id="register-form-link">Rate a Course</a>
								</div>
								<div class="or">OR</div>
							</div>
						</div>
						<div class="panel-body">
							<div class="row">
								<div class="col-lg-12">
                                      <datalist id="subList">
                                            {% for sub in subjects %}
                                                <option value="{{ sub }}">
                                            {% endfor %}
								            </datalist>
                                    <datalist id="profList">
                                            {% for p in prof %}
                                                <option value="{{ p }}">
                                            {% endfor %}
								            </datalist>
                                 <form id="login-form" action="" method="post" role="form" style="display: block;">
                                        <div class="form-group">
											<label class="icon-lp"><i class="fas fa-book"></i></label>
											<input type="text" name="subject" id="final-rating-subject" tabindex="1" class="form-control" list="subList" placeholder="Subject" value="" required>
										</div>


                                        <div class="form-group">
											<label class="icon-lp"><i class="fas fa-user-tie"></i></label>
											<input type="text" name="professor" id="final-rating-prof" tabindex="1" class="form-control" list="profList" placeholder="Professor" value="" required>
										</div>
                                     <div class="form-group" >
											<div class="row">
												<div class="col-sm-6 offset-sm-3">
													<input type="button" name="rating-submit" id="final-rating-submit" tabindex="4" class="form-control btn btn-login" value="Submit">
												</div>
											</div>
										</div>
                                 </form>
                                <form id="final-rating-form" style="display: none;">
                                        <div class="form-group" style="margin-top: 15%;">
                                            <div class="star-rating">How much peace is the attendance <br>(1 Star : Very strict/Have to attend almost all classes<br>5 Star : Ekdum Peace/Can bunk every class)<br>

                                                    <div class="containerdiv">
                                                        <div class="cornerimage">
                                                        <img class = "imgStar" src="{% static 'webview/images/purpleStarEmpty.png' %}" alt="img">
                                                        </div>
                                                        <div class="cornerimage" id="attendanceRate" style="width:100%;">
                                                        <img class = "imgStar" src="{% static 'webview/images/purpleStartFull.png' %}" alt="">
                                                        </div>
                                                    </div>

                                            </div>

                                        </div>
                                    <br>
                                        <div class="form-group" style="margin-top: 15%;">
                                            <div class="star-rating">How good the professor gives overall grades?<br>(1 Star : Strictly according to the performance<br>5 Star : Looking at your name/face/attendance/gender)<br>
                                                    <div class="containerdiv">
                                                        <div class="cornerimage">
                                                        <img class = "imgStar" src="{% static 'webview/images/purpleStarEmpty.png' %}" alt="img">
                                                        </div>
                                                        <div class="cornerimage" id ="gradeRate" style="width:75%;">
                                                        <img class = "imgStar" src="{% static 'webview/images/purpleStartFull.png' %}" alt="">
                                                        </div>
                                                    </div>

                                            </div>

                                        </div>

                                     <br>
                                        <div class="form-group" style="margin-top: 15%;">
                                            <div class="star-rating">How good the professor gives TA marks? <br>(1 Star : 0/20 or strictly according to class/test performance<br>5 Star : 20/20 or according to how much you can beg!)<br>
                                                    <div class="containerdiv">
                                                        <div class="cornerimage">
                                                        <img class = "imgStar" src="{% static 'webview/images/purpleStarEmpty.png' %}" alt="img">
                                                        </div>
                                                        <div class="cornerimage" id ="taRate" style="width:25%;">
                                                        <img class = "imgStar" src="{% static 'webview/images/purpleStartFull.png' %}" alt="">
                                                        </div>
                                                    </div>

                                            </div>

                                        </div>

                                     <br>
                                        <div class="form-group" style="margin-top: 15%;">
                                            <div class="star-rating">How much is the professor strict about class timings? i.e. Allowing to enter class on being late<br>(1 Star : Will not allow even if 5 minutes late<br>5 Star : Doesn't care when you enter the class)<br>
                                                    <div class="containerdiv">
                                                        <div class="cornerimage">
                                                        <img class = "imgStar" src="{% static 'webview/images/purpleStarEmpty.png' %}" alt="img">
                                                        </div>
                                                        <div class="cornerimage" id ="timeRate" style="width:45%;">
                                                        <img class = "imgStar" src="{% static 'webview/images/purpleStartFull.png' %}" alt="">
                                                        </div>
                                                    </div>

                                            </div>

                                        </div>

                                        <div class="form-group" style="margin-top: 15%;">
											<label class="label-tag">Some of the tags from your fellow mates.</label>
                                            <input id="show-rating-tags" class="form-control" value="sample,tag" readonly>
                                        </div>

									</form>
                                    <div id="register-form-container">
									<form id="register-form" action="/login" method="post" role="form" style="display: none;">
                                        {% csrf_token %}
{#										<div class="form-group">#}
{#											<label class="icon-lp"><i class="fas fa-user-tie"></i></label>#}
{#											<input type="text" name="username" id="username" tabindex="1" class="form-control" placeholder="Username" value="" required="">#}
{#										</div>#}
										<div class="form-group">
											<label class="icon-lp"><i class="fas fa-envelope"></i></label>
											<input type="email" name="email" id="email" tabindex="1" class="form-control" placeholder="Email Address" value="@iitkgp.ac.in" required="">
										</div>
										<div class="form-group">
											<label class="icon-lp"><i class="fas fa-key"></i></label>
											<input type="password" name="password" id="password" tabindex="2" class="form-control" placeholder="Password" required="">
										</div>

                                        <div class="che-box">

											<label class="checkbox-in">
                                                <i class="fas fa-asterisk" style="color: #755c9e;"></i>Being involved in lot of "high" crimes ourselves, <b>Anonymity</b> is our prime concern. (Nobody can know who rated what)<br>This login is just to ensure you can rate a professor-subject combination only once.
											</label>
										</div>
{#										<div class="form-group">#}
{#											<label class="icon-lp"><i class="fas fa-key"></i></label>#}
{#											<input type="password" name="confirm-password" id="confirm-password" tabindex="2" class="form-control" placeholder="Confirm Password" required="">#}
{#										</div>#}
									<!-- 	<ul>
											<li>
												<button class="fb"><i class="fab fa-facebook-f"></i> Connect with Facebook</button>
											</li>
											<li>
												<button class="tw"><i class="fab fa-twitter"></i> Connect with Twitter</button>
											</li>
										</ul> -->
										

										
										<div class="form-group">
											<div class="row">
												<div class="col-sm-6 ">
													<input type="submit" name="register-submit" id="register-submit" tabindex="4" class="form-control btn btn-register" value="Login">
												</div>
                                                <div class="col-sm-6">
{#                                                    <button name="register-submit" id="-submit" tabindex="4" class="form-control btn btn-register">Register button</button>#}
													<input type="button" name="register-submit" id="getpassword-button" tabindex="4" class="form-control btn btn-register" value="Get Password">
												</div>
											</div>
										</div>										
									</form>
                                        </div>
                                    <form id="rating-form" action="" method="post" role="form" style="display: none;">
                                        <div class="form-group">
											<label class="icon-lp"><i class="fas fa-book"></i></label>
											<input type="text" name="subject" id="rating-subject" tabindex="1" class="form-control" list="subList" placeholder="Subject" value="" required>
										</div>


                                        <div class="form-group">
											<label class="icon-lp"><i class="fas fa-user-tie"></i></label>
											<input type="text" name="professor" id="rating-prof" tabindex="1" class="form-control" list="profList" placeholder="Professor" value="" required>
										</div>

										<div class="form-group">
                                            <div class="star-rating">How much is the attendance load?<br>(1 Star : Very strict/Have to attend almost all classes<br>5 Star : Ekdum Peace/Can bunk every class)<br>
                                              <fieldset data="attendance">
                                                <input type="radio" id="star5" name="rating1" value="5" class="rating"/><label for="star5" title="Outstanding">5 stars</label>
                                                <input type="radio" id="star4" name="rating1" value="4" class="rating"/><label for="star4" title="Very Good">4 stars</label>
                                                <input type="radio" id="star3" name="rating1" value="3" class="rating"/><label for="star3" title="Good">3 stars</label>
                                                <input type="radio" id="star2" name="rating1" value="2" class="rating"/><label for="star2" title="Poor">2 stars</label>
                                                <input type="radio" id="star1" name="rating1" value="1" class="rating"/><label for="star1" title="Very Poor">1 star</label>
                                              </fieldset>
                                            </div>

                                        </div>

                                        <div class="form-group">
                                            <div class="star-rating">How good the professor gives overall grades?<br>(1 Star : Strictly according to the performance<br>5 Star : Looking at your name/face/attendance/gender)<br>
                                              <fieldset data="grades">
                                                <input type="radio" id="star54" name="rating13" value="5" class="rating"/><label for="star54" title="Outstanding">5 stars</label>
                                                <input type="radio" id="star44" name="rating13" value="4" class="rating"/><label for="star44" title="Very Good">4 stars</label>
                                                <input type="radio" id="star34" name="rating13" value="3" class="rating"/><label for="star34" title="Good">3 stars</label>
                                                <input type="radio" id="star24" name="rating13" value="2" class="rating"/><label for="star24" title="Poor">2 stars</label>
                                                <input type="radio" id="star14" name="rating13" value="1" class="rating"/><label for="star14" title="Very Poor">1 star</label>
                                              </fieldset>
                                            </div>

                                        </div>

                                        <div class="form-group">
                                            <div class="star-rating">How good the professor gives TA marks? <br>(1 Star : 0/20 or strictly according to class/test performance<br>5 Star : 20/20 or according to how much you can beg!)<br>
                                              <fieldset data="taMarks">
                                                <input type="radio" id="star511" name="rating2" value="5" class="rating"/><label for="star511" title="Outstanding">5 stars</label>
                                                <input type="radio" id="star411" name="rating2" value="4" class="rating"/><label for="star411" title="Very Good">4 stars</label>
                                                <input type="radio" id="star311" name="rating2" value="3" class="rating"/><label for="star311" title="Good">3 stars</label>
                                                <input type="radio" id="star211" name="rating2" value="2" class="rating"/><label for="star211" title="Poor">2 stars</label>
                                                <input type="radio" id="star111" name="rating2" value="1" class="rating"/><label for="star111" title="Very Poor">1 star</label>
                                              </fieldset>
                                            </div>

                                        </div>

                                        <div class="form-group">
                                            <div class="star-rating">How much is the professor strict about class timings? i.e. Allowing to enter class on being late<br>(1 Star : Will not allow even if 5 minutes late<br>5 Star : Doesn't care when you enter the class)<br>
                                              <fieldset data="timing">
                                                <input type="radio" id="star51" name="rating21" value="5" class="rating"/><label for="star51" title="Outstanding">5 stars</label>
                                                <input type="radio" id="star41" name="rating21" value="4" class="rating"/><label for="star41" title="Very Good">4 stars</label>
                                                <input type="radio" id="star31" name="rating21" value="3" class="rating"/><label for="star31" title="Good">3 stars</label>
                                                <input type="radio" id="star21" name="rating21" value="2" class="rating"/><label for="star21" title="Poor">2 stars</label>
                                                <input type="radio" id="star11" name="rating21" value="1" class="rating"/><label for="star11" title="Very Poor">1 star</label>
                                              </fieldset>
                                            </div>

                                        </div>

                                        <div class="form-group">
											<label class="label-tag">Kindly add some short tags for your fellow mates.</label>
                                            <input name='tags' id="rating-tags" class="form-control" autofocus>

{#											<input type="text" name="tags" id="tags" tabindex="2" class="form-control" placeholder="">#}
										</div>
									<!-- 	<ul>
											<li>
												<button class="fb"><i class="fab fa-facebook-f"></i> Connect with Facebook</button>
											</li>
											<li>
												<button class="tw"><i class="fab fa-twitter"></i> Connect with Twitter</button>
											</li>
										</ul> -->
                                        <div class="form-group">
											<div class="row">
												<div class="col-sm-6 offset-sm-3">
													<input type="button" name="rating-submit" id="rating-submit" tabindex="4" class="form-control btn btn-login" value="Submit">
												</div>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>

					<p class="footer-company-name">Made with <i class="fas fa-heart"></i> By someone who wishes to graduate on time <i class="far fa-smile-beam"></i> <br><!-- Place this tag where you want the button to render. -->
<a class="github-button" href="https://github.com/DefCon-007" aria-label="Follow @DefCon-007 on GitHub">Follow @DefCon-007</a><!-- Place this tag where you want the button to render. -->
<a class="github-button" href="https://github.com/DefCon-007/rateMyProfessor" data-icon="octicon-star" aria-label="Star DefCon-007/rateMyProfessor on GitHub">Star</a><!-- Place this tag where you want the button to render. -->
<a class="github-button" href="https://github.com/DefCon-007/rateMyProfessor/fork" data-icon="octicon-repo-forked" aria-label="Fork DefCon-007/rateMyProfessor on GitHub">Fork</a></p>
					
				</div>
			</div>
		</div>	
	</div>
	
</div>



{#<script src="{% static '/webview/js/bootstrap.min.js' %}"></script>#}
<script src="{% static '/webview/js/particles.min.js' %}"></script>
<script src="{% static '/webview/js/index.js' %}"></script>
	<script type="text/javascript">


		$(function() {
			$('#login-form-link').click(function(e) {
				$("#login-form").delay(100).fadeIn(100);
				$("#register-form").fadeOut(100);
				$('#register-form-link').removeClass('active');
				$(this).addClass('active');
				$("#rating-form").hide();
				e.preventDefault();
			});
			$('#register-form-link').click(function(e) {
			    {#Before chnging here look below at changeLoginStatus#}
				$("#register-form").delay(100).fadeIn(100);
				$("#login-form").fadeOut(100);
				$('#login-form-link').removeClass('active');
				$(this).addClass('active');
				attachForm()
				e.preventDefault();
			});
			$('#getpassword-button').click(function(e) {
				Swal({
                      title: 'Enter your institute email-id (xyz@iitkgp.ac.in)',
                      input: 'email',
                        inputValue : "@iitkgp.ac.in",
                      inputAttributes: {
                        autocapitalize: 'off'
                      },
                      showCancelButton: true,
                      confirmButtonText: 'Send Password',
                      showLoaderOnConfirm: true,
                      preConfirm: (login) => {
                          {#var email = ${login};#}
                          if (login.search("@iitkgp.ac.in") == -1) {
                              Swal({
                                    title: "Error",
                                    text: "Please enter the institute email id.",
                                    type: "error",
                                    });
                              return false;
                          }

                       else {
                              return fetch(`/generatePassword?email=${login}`)
                                  .then(response => {
                                      if (!response.ok) {
                                          throw new Error(response.statusText)
                                      }
                                      return 1;
                                      {#return response.json()#}
                                  })
                                  .catch(error => {
                                      Swal.showValidationMessage(
                                          `Request failed: ${error}`
                                      );
                                      return false;
                                  })
                          }
                      },
                      allowOutsideClick: () => !Swal.isLoading()
                    }).then((result) => {
                        console.log(result);
                      if (result.value == 1) {
                        Swal({
                            title: "Success",
                            text: "Password successfully sent to your email id.",
                            type: "success",

                        })
                      }

                    })
			});

		});

		$('#rating-submit').click(function(e) {
		    sendRating();
        });
		$('#final-rating-submit').click(function(e) {
		    getFinalRating();
        });
		$('.form-group input').focus(function () {
			$(this).parent().addClass('addcolor');
		}).blur(function () {
			$(this).parent().removeClass('addcolor');
		});




    function attachForm(flag=false){
        console.log(LOGIN_STATUS);
        {#var tagIdToDisplay = {{ tagIdToDisplay }};#}
        var loginForm = document.getElementById("register-form-container");
        var ratingForm  = document.getElementById("rating-form");
        if ((LOGIN_STATUS) || (flag)){
            console.log("logged in");
            loginForm.style.display = "none" ;
            ratingForm.style.display = "block";
        }
        else {
            {
                console.log("not logged in");
            loginForm.style.display = "block" ;
            ratingForm.style.display = "none";
        }
        }

    }

    {#Getting the rating from radio buttons#}
    var ratingObj = new Object()
   $('.rating').change(function(e) {
       console.log(e);
        var key = $(this).parent().attr('data');
        var val = $(this).attr('value');
        ratingObj[key] = val;
        console.log(key);
        console.log(val);

        console.log(ratingObj)
      });
    function sendRating() {
        console.log(document.getElementById("rating-tags").value)
          if (!($("#rating-form")[0].checkValidity())) {
                    $("#rating-form")[0].reportValidity();
                }
                else {
                    {#Send data#}
                    var sub = document.getElementById("rating-subject").value;
                    var prof = document.getElementById("rating-prof").value;
                    var tags = document.getElementById("rating-tags").value;
                    ratingObj["tags"] = tags;
                    ratingObj["subject"] = sub
                    ratingObj["prof"] = prof;
                       var csrftoken = Cookies.get('csrftoken');
                        let url = "{% url 'addrating' %}" ;
                        var xhttp = new XMLHttpRequest();
                        xhttp.onreadystatechange = function() {
                        if (this.readyState == 4) {
                            var obj = JSON.parse(this.responseText);
                            console.log(obj)
                            Swal({
                                title : capitalizeFirstLetter(obj["swalStatus"]),
                                text :obj["msg"],
                                type : obj["swalStatus"],
                                onClose :  () => {
                                                if ((obj["swalStatus"] == "success")) {
                                                    window.location.replace("{% url 'index' %}");
                                                    {#document.getElementById("rating-form").reset();#}
                                                    {#document.getElementById("rating-tags").data('tagify').removeAllTags();#}
                                                    {#tagify.removeAllTags();#}
                                                }
                                              }
                            });


                        }
                      };
                      xhttp.open("POST", url, true);
                      xhttp.setRequestHeader("Content-Type", "application/json");
                      xhttp.setRequestHeader("Data-Type", "json");
                      xhttp.setRequestHeader("X-CSRFToken", csrftoken);
                      xhttp.send(JSON.stringify(ratingObj));
                }


    }

    function getFinalRating() {
      if (!($("#login-form")[0].checkValidity())) {
                $("#login-form")[0].reportValidity();
            }
            else {
           Swal({
                allowOutsideClick : false,
                showConfirmButton : false,
               allowEscapeKey : false,

  html:
    '<div class="ld ld-ring ld-spin" style="font-size:64px;color:#5b487a;  text-align: center;"></div> <br> <p style="text-align: center;">Processing</p>',
});
                {#Send data#}
                var sub = document.getElementById("final-rating-subject").value;
                var prof = document.getElementById("final-rating-prof").value;
                   var csrftoken = Cookies.get('csrftoken');
                    let url = "{% url 'getrating' %}" ;
                    var xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function() {
                    if (this.readyState == 4) {
                        var obj = JSON.parse(this.responseText);
                         console.log(obj)
                        if (this.status ==200){
                            document.getElementById("attendanceRate").style.width = obj["attendance"] + "%";
                            document.getElementById("taRate").style.width = obj["ta"] + "%";
                            document.getElementById("gradeRate").style.width = obj["grade"] + "%";
                            document.getElementById("timeRate").style.width = obj["time"] + "%";
                            document.getElementById("show-rating-tags").setAttribute("value", obj["tags"]) ;
                            var inputFinalTag = document.querySelector('input[id=show-rating-tags]'),
                                        // init Tagify script on the above inputs
                                        tagify = new Tagify(inputFinalTag, {

                                        });
                            document.getElementById("final-rating-form").style.display = "block";
                            Swal({
                                title : "Success",
                                text :"Rating Successfully received",
                                type : "success",

                            });
                        }
                        else {

                            Swal({
                                title : capitalizeFirstLetter(obj["swalStatus"]),
                                text :obj["msg"],
                                type : obj["swalStatus"],

                            });

                        }
                    }
                  };
                  xhttp.open("POST", url, true);
                  xhttp.setRequestHeader("Content-Type", "application/json");
                  xhttp.setRequestHeader("Data-Type", "json");
                  xhttp.setRequestHeader("X-CSRFToken", csrftoken);
                  xhttp.send(JSON.stringify({"subject" : sub, "prof" : prof}));
            }


}


function sendRequest(data, url) {
     var csrftoken = Cookies.get('csrftoken');
    {#let url = "{% url 'markattendance' %}" ;#}
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        console.log(this.responseText);
         document.open();
        document.write(this.responseText);
        document.close();
        {#location.reload(true);#}
     {#document.getElementById("demo").innerHTML = this.responseText;#}
    }
  };
  xhttp.open("POST", url, true);
  xhttp.setRequestHeader("Content-Type", "application/json");
  xhttp.setRequestHeader("X-CSRFToken", csrftoken);
  xhttp.send(JSON.stringify(data));
}




var Taginput = document.querySelector('input[name=tags]'),
    // init Tagify script on the above inputs
    tagify = new Tagify(Taginput, {
tagTemplate : function(v, tagData){
    return `<tag title='${v}'>
                    <x title=''></x>
                    <div style="background:#755c9e;color:white;">
                        ${v}
                    </div>
                </tag>`;
    },
    });

// Chainable event listeners
tagify.on('add', onAddTag)
      .on('remove', onRemoveTag)
      .on('input', onInput)
      .on('invalid', onInvalidTag)
      .on('click', onTagClick);

// tag added callback
function onAddTag(e){
    {#console.log(e.detail);#}
    {#console.log("original input value: ", input.value)#}
    tagify.off('add', onAddTag) // exmaple of removing a custom Tagify event
}

// tag remvoed callback
function onRemoveTag(e){
    {#console.log(e.detail);#}
    console.log("tagify instance value:", tagify.value)
}

// on character(s) added/removed (user is typing/deleting)
function onInput(e){
    {#console.log(e.detail);#}
}

// invalid tag added callback
function onInvalidTag(e){
    {#console.log(e.detail);#}
}

// invalid tag added callback
function onTagClick(e){
    {#console.log(e.detail);#}
}


function changeLoginStatus(flag=false) {
    if ((LOGIN_STATUS) || (flag)){
        document.getElementById("logoutButton").style.display = "block"
        {% if swalFlag %}
             $("#register-form").delay(100).fadeIn(100);
				$("#login-form").fadeOut(100);
				$('#login-form-link').removeClass('active');

				$("#register-form-link").addClass('active');
				attachForm()
        {% endif %}
    }else {
        document.getElementById("logoutButton").style.display = "none"
    }
}
changeLoginStatus()





	</script>

</body>
</html>
